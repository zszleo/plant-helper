# æ¤ç‰©ç§æ¤åŠ©æ‰‹æé†’åŠŸèƒ½å¼€å‘æ–¹æ¡ˆ

## ï¿½ å¼€å‘é¡¹æ‹†åˆ†ä¸è¿›åº¦ç®¡ç†

### ğŸ“ 0.0 å¼€å‘æµç¨‹è¯´æ˜

1. **å¼€å§‹æ–°å¯¹è¯æ—¶**ï¼š
   - æŸ¥çœ‹æœ¬æ–‡æ¡£çš„"å¾…å¼€å‘çš„å¼€å‘é¡¹"éƒ¨åˆ†
   - é€‰æ‹©ä¸€ä¸ªçŠ¶æ€ä¸º"â³ å¾…å¼€å‘"ä¸”ä¾èµ–é¡¹å·²å®Œæˆçš„å¼€å‘é¡¹
   - åœ¨æ–°å¯¹è¯ä¸­æ˜ç¡®è¯´æ˜è¦å¼€å‘çš„å¼€å‘é¡¹ç¼–å·å’Œåç§°

2. **å¼€å‘è¿‡ç¨‹ä¸­**ï¼š
   - ä¸¥æ ¼æŒ‰ç…§å¼€å‘é¡¹çš„åŒ…å«å†…å®¹è¿›è¡Œå¼€å‘
   - ç¡®ä¿äº¤ä»˜ç‰©å®Œæ•´
   - éµå¾ªæœ¬æ–‡æ¡£ä¸­çš„æŠ€æœ¯è§„èŒƒå’Œæ ·å¼è§„èŒƒ

3. **å¼€å‘å®Œæˆå**ï¼š
   - æ›´æ–°æœ¬æ–‡æ¡£çš„è¿›åº¦çŠ¶æ€
   - å°†å¼€å‘é¡¹ä»"â³ å¾…å¼€å‘"ç§»åŠ¨åˆ°"âœ… å·²å®Œæˆçš„å¼€å‘é¡¹"
   - æ›´æ–°å¼€å‘é¡¹æ€»è§ˆè¡¨ä¸­çš„çŠ¶æ€
   - è®°å½•å®Œæˆæ—¶é—´å’Œå…³é”®æˆæœ
   - è¯¢é—®ç”¨æˆ·æ˜¯å¦ç»§ç»­

4. **é‡åˆ°é—®é¢˜æ—¶**ï¼š
   - æé†’ç”¨æˆ·é‡åˆ°é—®é¢˜ï¼Œæå‡ºè§£å†³æ–¹æ¡ˆï¼Œè¯¢é—®ç”¨æˆ·æ˜¯å¦æŒ‰è§£å†³æ–¹æ¡ˆå¤„ç†
   - åœ¨å¼€å‘é¡¹ä¸­è®°å½•é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
   - æ›´æ–°ä¾èµ–å…³ç³»ï¼ˆå¦‚æœ‰å¿…è¦ï¼‰
   - è°ƒæ•´åç»­å¼€å‘é¡¹çš„ä¼˜å…ˆçº§

### âš ï¸ 0.1 é‡è¦æç¤º
**ç”±äºtokenæ•°é™åˆ¶ï¼Œæœ¬æ–¹æ¡ˆå·²æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å¼€å‘é¡¹ã€‚æ¯æ¬¡å¯¹è¯åªå¼€å‘ä¸€ä¸ªå¼€å‘é¡¹ï¼Œå¼€å‘å®Œæˆåè¯·æ›´æ–°æœ¬æ–‡æ¡£çš„è¿›åº¦çŠ¶æ€ã€‚**

### ğŸ“Š 0.3 å¼€å‘é¡¹æ€»è§ˆ

| å¼€å‘é¡¹ç¼–å· | å¼€å‘é¡¹åç§° | é¢„è®¡å·¥ä½œé‡ | çŠ¶æ€ | ä¾èµ–é¡¹ |
|-----------|-----------|-----------|------|--------|
| DEV-001 | æ•°æ®ç»“æ„æ‰©å±•ä¸å­˜å‚¨å·¥å…· | 2-3å¤© | â³ å¾…å¼€å‘ | æ—  |
| DEV-002 | è®¢é˜…æ¶ˆæ¯å·¥å…·å‡½æ•°å¼€å‘ | 1-2å¤© | â³ å¾…å¼€å‘ | DEV-001 |
| DEV-003 | æé†’åˆ—è¡¨é¡µé¢æ ·å¼ä¼˜åŒ– | 1å¤© | â³ å¾…å¼€å‘ | DEV-001 |
| DEV-004 | æé†’æ·»åŠ /ç¼–è¾‘é¡µé¢å¼€å‘ | 2-3å¤© | â³ å¾…å¼€å‘ | DEV-001, DEV-002 |
| DEV-005 | æé†’å†å²é¡µé¢å¼€å‘ | 2-3å¤© | â³ å¾…å¼€å‘ | DEV-001, DEV-002 |
| DEV-006 | äº‘å‡½æ•°å¼€å‘ä¸éƒ¨ç½² | 2-3å¤© | â³ å¾…å¼€å‘ | DEV-001, DEV-002, DEV-004 |
| DEV-007 | é›†æˆæµ‹è¯•ä¸ä¼˜åŒ– | 1-2å¤© | â³ å¾…å¼€å‘ | DEV-003, DEV-004, DEV-005, DEV-006 |

### âœ… 0.4 å·²å®Œæˆçš„å¼€å‘é¡¹

*æš‚æ— å·²å®Œæˆçš„å¼€å‘é¡¹*

### â³ 0.5 å¾…å¼€å‘çš„å¼€å‘é¡¹

#### DEV-001: æ•°æ®ç»“æ„æ‰©å±•ä¸å­˜å‚¨å·¥å…·
**ç›®æ ‡**ï¼šæ‰©å±•æ•°æ®æ¨¡å‹ï¼Œå®Œå–„å­˜å‚¨å·¥å…·å‡½æ•°
**å·¥ä½œé‡**ï¼š2-3å¤©
**ä¾èµ–**ï¼šæ— 
**åŒ…å«å†…å®¹**ï¼š
- æ‰©å±•æé†’æ•°æ®æ¨¡å‹ï¼ˆç¬¬2.1èŠ‚ï¼‰
- æ–°å¢æé†’å†å²æ•°æ®æ¨¡å‹ï¼ˆç¬¬2.2èŠ‚ï¼‰
- æ‰©å±•æœ¬åœ°å­˜å‚¨é”®å®šä¹‰ï¼ˆç¬¬2.3èŠ‚ï¼‰
- æ‰©å±•å­˜å‚¨å·¥å…·å‡½æ•°ï¼ˆç¬¬6.2èŠ‚ï¼‰
**äº¤ä»˜ç‰©**ï¼š
- æ›´æ–°åçš„æ•°æ®ç»“æ„æ–‡æ¡£
- å®Œå–„çš„storage.jså·¥å…·å‡½æ•°
- å•å…ƒæµ‹è¯•ç”¨ä¾‹

#### DEV-002: è®¢é˜…æ¶ˆæ¯å·¥å…·å‡½æ•°å¼€å‘
**ç›®æ ‡**ï¼šå®ç°è®¢é˜…æ¶ˆæ¯ç”³è¯·å’Œç®¡ç†åŠŸèƒ½
**å·¥ä½œé‡**ï¼š1-2å¤©
**ä¾èµ–**ï¼šDEV-001
**åŒ…å«å†…å®¹**ï¼š
- è®¢é˜…æ¶ˆæ¯å·¥å…·å‡½æ•°ï¼ˆç¬¬6.1èŠ‚ï¼‰
- è®¢é˜…çŠ¶æ€ç®¡ç†
- è®¢é˜…è¿‡æœŸæ—¶é—´è®¡ç®—
**äº¤ä»˜ç‰©**ï¼š
- subscription.jså·¥å…·å‡½æ•°
- è®¢é˜…çŠ¶æ€ç®¡ç†é€»è¾‘
- å•å…ƒæµ‹è¯•ç”¨ä¾‹

#### DEV-003: æé†’åˆ—è¡¨é¡µé¢æ ·å¼ä¼˜åŒ–
**ç›®æ ‡**ï¼šä¼˜åŒ–æé†’åˆ—è¡¨é¡µé¢ï¼Œåº”ç”¨å¡ç‰‡æ ·å¼
**å·¥ä½œé‡**ï¼š1å¤©
**ä¾èµ–**ï¼šDEV-001
**åŒ…å«å†…å®¹**ï¼š
- åº”ç”¨å¡ç‰‡æ ·å¼è§„èŒƒï¼ˆç¬¬3.0.2èŠ‚ï¼‰
- æ›´æ–°æé†’åˆ—è¡¨é¡µé¢æ ·å¼
- æ·»åŠ è®¢é˜…çŠ¶æ€æ˜¾ç¤º
- æ·»åŠ ä¸‹æ¬¡æé†’æ—¶é—´å€’è®¡æ—¶
**äº¤ä»˜ç‰©**ï¼š
- æ›´æ–°åçš„reminders.wxml
- æ›´æ–°åçš„reminders.wxss
- æ›´æ–°åçš„reminders.js

#### DEV-004: æé†’æ·»åŠ /ç¼–è¾‘é¡µé¢å¼€å‘
**ç›®æ ‡**ï¼šåˆ›å»ºæé†’æ·»åŠ å’Œç¼–è¾‘åŠŸèƒ½é¡µé¢
**å·¥ä½œé‡**ï¼š2-3å¤©
**ä¾èµ–**ï¼šDEV-001, DEV-002
**åŒ…å«å†…å®¹**ï¼š
- é¡µé¢ç»“æ„è®¾è®¡ï¼ˆç¬¬3.1èŠ‚ï¼‰
- è¡¨å•åŠŸèƒ½å®ç°
- è®¢é˜…æ¶ˆæ¯ç”³è¯·é›†æˆ
- é¡µé¢æ ·å¼å®ç°ï¼ˆç¬¬3.0.2èŠ‚ï¼‰
**äº¤ä»˜ç‰©**ï¼š
- reminder-addé¡µé¢å®Œæ•´æ–‡ä»¶
- è¡¨å•éªŒè¯é€»è¾‘
- è®¢é˜…æ¶ˆæ¯ç”³è¯·åŠŸèƒ½

#### DEV-005: æé†’å†å²é¡µé¢å¼€å‘
**ç›®æ ‡**ï¼šåˆ›å»ºæé†’å†å²è®°å½•æŸ¥çœ‹é¡µé¢
**å·¥ä½œé‡**ï¼š2-3å¤©
**ä¾èµ–**ï¼šDEV-001, DEV-002
**åŒ…å«å†…å®¹**ï¼š
- é¡µé¢ç»“æ„è®¾è®¡ï¼ˆç¬¬3.2èŠ‚ï¼‰
- å†å²è®°å½•å±•ç¤º
- ç­›é€‰åŠŸèƒ½å®ç°
- ç»Ÿè®¡ä¿¡æ¯æ˜¾ç¤º
- é¡µé¢æ ·å¼å®ç°ï¼ˆç¬¬3.0.2èŠ‚ï¼‰
**äº¤ä»˜ç‰©**ï¼š
- reminder-historyé¡µé¢å®Œæ•´æ–‡ä»¶
- ç­›é€‰åŠŸèƒ½
- ç»Ÿè®¡åŠŸèƒ½

#### DEV-006: äº‘å‡½æ•°å¼€å‘ä¸éƒ¨ç½²
**ç›®æ ‡**ï¼šå¼€å‘äº‘å‡½æ•°å®ç°å®šæ—¶æé†’å‘é€
**å·¥ä½œé‡**ï¼š2-3å¤©
**ä¾èµ–**ï¼šDEV-001, DEV-002, DEV-004
**åŒ…å«å†…å®¹**ï¼š
- å‘é€æé†’äº‘å‡½æ•°ï¼ˆç¬¬5.2èŠ‚ï¼‰
- æ£€æŸ¥æé†’äº‘å‡½æ•°ï¼ˆç¬¬5.3èŠ‚ï¼‰
- å®šæ—¶è§¦å‘å™¨é…ç½®ï¼ˆç¬¬5.4èŠ‚ï¼‰
- äº‘å‡½æ•°éƒ¨ç½²
**äº¤ä»˜ç‰©**ï¼š
- send-reminderäº‘å‡½æ•°
- check-remindersäº‘å‡½æ•°
- å®šæ—¶è§¦å‘å™¨é…ç½®
- éƒ¨ç½²æ–‡æ¡£

#### DEV-007: é›†æˆæµ‹è¯•ä¸ä¼˜åŒ–
**ç›®æ ‡**ï¼šå®ŒæˆåŠŸèƒ½æµ‹è¯•å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–
**å·¥ä½œé‡**ï¼š1-2å¤©
**ä¾èµ–**ï¼šDEV-003, DEV-004, DEV-005, DEV-006
**åŒ…å«å†…å®¹**ï¼š
- åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•
- ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- æ€§èƒ½æµ‹è¯•
- Bugä¿®å¤
**äº¤ä»˜ç‰©**ï¼š
- æµ‹è¯•æŠ¥å‘Š
- ä¼˜åŒ–å»ºè®®
- æœ€ç»ˆç‰ˆæœ¬

### ğŸ¯ 0.6 å½“å‰å¼€å‘å»ºè®®

**æ¨èå¼€å‘é¡ºåº**ï¼šDEV-001 â†’ DEV-002 â†’ DEV-003 â†’ DEV-004 â†’ DEV-005 â†’ DEV-006 â†’ DEV-007

**ç†ç”±**ï¼š
- DEV-001æ˜¯åŸºç¡€ï¼Œæ— ä¾èµ–ï¼Œåº”ä¼˜å…ˆå®Œæˆ
- DEV-002ä¾èµ–DEV-001ï¼Œæä¾›è®¢é˜…æ¶ˆæ¯åŠŸèƒ½
- DEV-003å¯ä»¥ä¸DEV-002å¹¶è¡Œå¼€å‘ï¼Œä¼˜åŒ–ç°æœ‰é¡µé¢
- DEV-004å’ŒDEV-005ä¾èµ–å‰ä¸¤é¡¹ï¼Œå¯ä»¥å¹¶è¡Œå¼€å‘
- DEV-006éœ€è¦DEV-004å®Œæˆåæ‰èƒ½æµ‹è¯•
- DEV-007æ˜¯æœ€åçš„é›†æˆæµ‹è¯•

---

## ï¿½ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### 1.1 èƒŒæ™¯
å½“å‰å°ç¨‹åºæé†’åŠŸèƒ½åªæœ‰ä¸€ä¸ªåŸºç¡€é¡µé¢ï¼Œç¼ºå°‘æ·»åŠ æé†’ã€ç¼–è¾‘æé†’ã€è®¢é˜…æ¶ˆæ¯é›†æˆã€æé†’å†å²è®°å½•ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚æœ¬æ–¹æ¡ˆæ—¨åœ¨å®Œå–„æé†’åŠŸèƒ½ï¼Œæä¾›å®Œæ•´çš„æ™ºèƒ½æé†’æœåŠ¡ã€‚

### 1.2 ç›®æ ‡
- å®ç°å®Œæ•´çš„æé†’æ·»åŠ /ç¼–è¾‘åŠŸèƒ½
- é›†æˆå¾®ä¿¡è®¢é˜…æ¶ˆæ¯æ¨é€
- æä¾›æé†’å†å²è®°å½•æŸ¥çœ‹
- æ”¯æŒè‡ªå®šä¹‰æé†’ç±»å‹å’Œé¢‘ç‡
- å®ç°äº‘å‡½æ•°å®šæ—¶è§¦å‘æé†’

### 1.3 æŠ€æœ¯æ ˆ
- **å‰ç«¯**ï¼šå¾®ä¿¡å°ç¨‹åºåŸç”Ÿå¼€å‘
- **åç«¯**ï¼šå¾®ä¿¡äº‘å¼€å‘ï¼ˆäº‘å‡½æ•°ï¼‰
- **å­˜å‚¨**ï¼šæœ¬åœ°å­˜å‚¨ + äº‘æ•°æ®åº“
- **æ¶ˆæ¯æ¨é€**ï¼šå¾®ä¿¡è®¢é˜…æ¶ˆæ¯

---

## ğŸ“ æ•°æ®ç»“æ„è®¾è®¡

### 2.1 æ‰©å±•æé†’æ•°æ®æ¨¡å‹

```javascript
{
  _id: "æé†’ID",
  plantId: "æ¤ç‰©ID",
  type: "watering/fertilizing/custom", // æé†’ç±»å‹
  customType: "è‡ªå®šä¹‰ç±»å‹åç§°", // è‡ªå®šä¹‰ç±»å‹ï¼ˆå½“typeä¸ºcustomæ—¶ä½¿ç”¨ï¼‰
  time: "08:00", // æé†’æ—¶é—´ï¼ˆHH:mmæ ¼å¼ï¼‰
  frequency: 7, // é¢‘ç‡ï¼ˆå¤©æ•°ï¼‰
  frequencyType: "daily/weekly/monthly/custom", // é¢‘ç‡ç±»å‹
  nextRemindTime: "2026-01-30T08:00:00.000Z", // ä¸‹æ¬¡æé†’æ—¶é—´
  isEnabled: true, // æ˜¯å¦å¯ç”¨
  templateId: "U3WXNNIv14paU3pZJggJ2ftVZglojkvKr9WFecqQOxo", // è®¢é˜…æ¶ˆæ¯æ¨¡æ¿ID
  subscribeStatus: "granted/rejected/need-request/expired", // è®¢é˜…çŠ¶æ€
  lastSubscribeTime: "2026-01-29T08:00:00.000Z", // æœ€åè®¢é˜…æ—¶é—´
  subscribeExpireTime: "2026-02-28T08:00:00.000Z", // è®¢é˜…è¿‡æœŸæ—¶é—´
  createTime: "åˆ›å»ºæ—¶é—´",
  updateTime: "æ›´æ–°æ—¶é—´"
}
```

### 2.2 æ–°å¢æé†’å†å²æ•°æ®æ¨¡å‹

```javascript
{
  _id: "å†å²è®°å½•ID",
  reminderId: "æé†’ID",
  plantId: "æ¤ç‰©ID",
  plantName: "æ¤ç‰©åç§°",
  type: "watering/fertilizing/custom",
  customType: "è‡ªå®šä¹‰ç±»å‹åç§°",
  remindTime: "è®¡åˆ’æé†’æ—¶é—´",
  sendStatus: "success/failed/pending", // å‘é€çŠ¶æ€
  sendTime: "å®é™…å‘é€æ—¶é—´",
  errorMessage: "é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœå¤±è´¥ï¼‰",
  createTime: "åˆ›å»ºæ—¶é—´"
}
```

### 2.3 æœ¬åœ°å­˜å‚¨é”®å®šä¹‰

```javascript
const STORAGE_KEYS = {
  USER_INFO: 'user_info',
  PLANTS: 'plants',
  RECORDS: 'records',
  REMINDERS: 'reminders',
  REMINDER_HISTORY: 'reminder_history', // æ–°å¢
  SYNC_STATE: 'sync_state',
  OFFLINE_QUEUE: 'offline_queue'
}
```

---

## ğŸ¨ é¡µé¢è®¾è®¡

### 3.0 å‰ç«¯æ ·å¼è®¾è®¡è§„èŒƒ

#### 3.0.1 å¡ç‰‡æ ·å¼åŸºç¡€è§„èŒƒ

æ‰€æœ‰æé†’åŠŸèƒ½ç›¸å…³é¡µé¢ç»Ÿä¸€é‡‡ç”¨å¡ç‰‡å¼å¸ƒå±€è®¾è®¡ï¼Œå‚è€ƒæ•°æ®ç»Ÿè®¡é¡µé¢çš„æ¨¡å—å¡ç‰‡æ ·å¼ï¼Œç¡®ä¿è§†è§‰ä¸€è‡´æ€§å’Œç”¨æˆ·ä½“éªŒçš„ç»Ÿä¸€æ€§ã€‚

**åŸºç¡€å¡ç‰‡æ ·å¼è§„èŒƒ**ï¼š

```css
/* å¡ç‰‡å®¹å™¨ */
.card {
  background-color: #ffffff;
  border-radius: 12rpx;
  padding: 30rpx;
  margin-bottom: 20rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
}

/* å¡ç‰‡æ ‡é¢˜ */
.card-title {
  font-size: 32rpx;
  font-weight: 600;
  color: #333;
  margin-bottom: 24rpx;
}

/* å¡ç‰‡å†…å®¹åŒºåŸŸ */
.card-content {
  display: flex;
  flex-direction: column;
  gap: 20rpx;
}

/* å¡ç‰‡å†…å­é¡¹å¡ç‰‡ */
.sub-card {
  background: #f9f9f9;
  border-radius: 12rpx;
  padding: 16rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
}

/* å¡ç‰‡å¤´éƒ¨ */
.card-header {
  display: flex;
  align-items: center;
  margin-bottom: 12rpx;
}

/* å›¾æ ‡å®¹å™¨ */
.icon-wrapper {
  width: 56rpx;
  height: 56rpx;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28rpx;
  margin-right: 12rpx;
}

/* ä¿¡æ¯åŒºåŸŸ */
.info-area {
  flex: 1;
  display: flex;
  align-items: center;
}

/* ç»Ÿè®¡åŒºåŸŸ */
.stats-area {
  display: flex;
  align-items: center;
}

/* åç§°æ–‡æœ¬ */
.name-text {
  font-size: 28rpx;
  color: #333;
  font-weight: 500;
}

/* æ•°é‡æ–‡æœ¬ */
.count-text {
  font-size: 32rpx;
  font-weight: 600;
}

/* è¿›åº¦æ¡å®¹å™¨ */
.progress-container {
  display: flex;
  align-items: center;
  gap: 8rpx;
}

/* è¿›åº¦æ¡ */
.progress-bar {
  flex: 1;
  height: 12rpx;
  background: #e0e0e0;
  border-radius: 6rpx;
  overflow: hidden;
}

/* è¿›åº¦å¡«å…… */
.progress-fill {
  height: 100%;
  border-radius: 6rpx;
  transition: width 0.3s ease-in-out;
}

/* è¿›åº¦æ–‡æœ¬ */
.progress-text {
  width: 80rpx;
  font-size: 24rpx;
  color: #999;
  text-align: right;
}
```

**é¢œè‰²ä¸»é¢˜è§„èŒƒ**ï¼š

```css
/* ä¸»è‰²è°ƒ - ç»¿è‰²ç³» */
--primary-color: #4CAF50;
--primary-light: #8BC34A;
--primary-dark: #388E3C;

/* çŠ¶æ€é¢œè‰² */
--success-color: #4CAF50;
--warning-color: #FF9800;
--error-color: #F44336;
--info-color: #2196F3;

/* ä¸­æ€§è‰² */
--text-primary: #333333;
--text-secondary: #666666;
--text-tertiary: #999999;
--bg-primary: #ffffff;
--bg-secondary: #f5f5f5;
--bg-tertiary: #f9f9f9;
--border-color: #e0e0e0;

/* é˜´å½± */
--shadow-sm: 0 2rpx 8rpx rgba(0, 0, 0, 0.06);
--shadow-md: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
--shadow-lg: 0 4rpx 16rpx rgba(0, 0, 0, 0.12);
```

**äº¤äº’æ•ˆæœè§„èŒƒ**ï¼š

```css
/* ç‚¹å‡»æ•ˆæœ */
.clickable {
  transition: background-color 0.2s ease;
}

.clickable:active {
  background-color: rgba(76, 175, 80, 0.1);
}

/* æŒ‰é’®æ ·å¼ */
.btn {
  padding: 16rpx 32rpx;
  border-radius: 8rpx;
  font-size: 28rpx;
  font-weight: 500;
  transition: all 0.2s ease;
}

.btn-primary {
  background-color: #4CAF50;
  color: #ffffff;
}

.btn-primary:active {
  background-color: #388E3C;
}

.btn-secondary {
  background-color: #f5f5f5;
  color: #333;
}

.btn-secondary:active {
  background-color: #e0e0e0;
}

/* è¾“å…¥æ¡†æ ·å¼ */
.input {
  background-color: #f9f9f9;
  border: 1rpx solid #e0e0e0;
  border-radius: 8rpx;
  padding: 20rpx 24rpx;
  font-size: 28rpx;
  color: #333;
}

.input:focus {
  border-color: #4CAF50;
  background-color: #ffffff;
}
```

#### 3.0.2 æé†’åŠŸèƒ½é¡µé¢æ ·å¼åº”ç”¨

**æé†’åˆ—è¡¨é¡µé¢ï¼ˆpages/remindersï¼‰**ï¼š

```css
/* ç»Ÿè®¡å¡ç‰‡ */
.stats-card {
  background-color: #ffffff;
  border-radius: 12rpx;
  padding: 30rpx;
  margin-bottom: 20rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
  display: flex;
  justify-content: space-around;
}

.stat-item {
  text-align: center;
  padding: 18rpx;
  border-radius: 16rpx;
  transition: background-color 0.3s ease;
}

.stat-item:active {
  background-color: rgba(76, 175, 80, 0.1);
}

.stat-value {
  font-size: 64rpx;
  font-weight: 600;
  color: #4CAF50;
  margin-bottom: 8rpx;
}

.stat-label {
  font-size: 28rpx;
  color: #666;
}

/* æé†’å¡ç‰‡ */
.reminder-card {
  background: #ffffff;
  border-radius: 12rpx;
  padding: 24rpx;
  margin-bottom: 20rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
}

.reminder-card-header {
  display: flex;
  align-items: center;
  margin-bottom: 12rpx;
}

.reminder-icon {
  width: 56rpx;
  height: 56rpx;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28rpx;
  margin-right: 12rpx;
  background-color: rgba(76, 175, 80, 0.2);
  color: #4CAF50;
}

.reminder-info {
  flex: 1;
  display: flex;
  align-items: center;
}

.reminder-name {
  font-size: 28rpx;
  color: #333;
  font-weight: 500;
}

.reminder-stats {
  display: flex;
  align-items: center;
}

.reminder-count {
  font-size: 32rpx;
  font-weight: 600;
  color: #4CAF50;
}

/* è®¢é˜…çŠ¶æ€æ ‡ç­¾ */
.subscribe-status {
  display: inline-flex;
  align-items: center;
  padding: 6rpx 12rpx;
  border-radius: 16rpx;
  font-size: 22rpx;
  font-weight: 500;
}

.subscribe-status.granted {
  background-color: rgba(76, 175, 80, 0.1);
  color: #4CAF50;
}

.subscribe-status.rejected {
  background-color: rgba(244, 67, 54, 0.1);
  color: #F44336;
}

.subscribe-status.expired {
  background-color: rgba(255, 152, 0, 0.1);
  color: #FF9800;
}

.subscribe-status.need-request {
  background-color: rgba(158, 158, 158, 0.1);
  color: #999;
}
```

**æé†’æ·»åŠ /ç¼–è¾‘é¡µé¢ï¼ˆpages/reminder-addï¼‰**ï¼š

```css
/* è¡¨å•å¡ç‰‡ */
.form-card {
  background-color: #ffffff;
  border-radius: 12rpx;
  padding: 30rpx;
  margin-bottom: 20rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
}

.form-title {
  font-size: 32rpx;
  font-weight: 600;
  color: #333;
  margin-bottom: 24rpx;
}

/* è¡¨å•é¡¹ */
.form-item {
  margin-bottom: 24rpx;
}

.form-label {
  font-size: 28rpx;
  color: #333;
  font-weight: 500;
  margin-bottom: 12rpx;
  display: block;
}

/* é€‰æ‹©å™¨å¡ç‰‡ */
.selector-card {
  background: #f9f9f9;
  border-radius: 12rpx;
  padding: 16rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.selector-icon {
  width: 56rpx;
  height: 56rpx;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28rpx;
  margin-right: 12rpx;
  background-color: rgba(76, 175, 80, 0.2);
  color: #4CAF50;
}

.selector-info {
  flex: 1;
  display: flex;
  align-items: center;
}

.selector-name {
  font-size: 28rpx;
  color: #333;
  font-weight: 500;
}

.selector-value {
  font-size: 24rpx;
  color: #999;
}

/* ç±»å‹é€‰æ‹©å¡ç‰‡ç»„ */
.type-selector-group {
  display: flex;
  flex-direction: column;
  gap: 12rpx;
}

.type-selector-card {
  background: #f9f9f9;
  border-radius: 12rpx;
  padding: 16rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
  display: flex;
  align-items: center;
  transition: all 0.2s ease;
}

.type-selector-card.selected {
  background-color: rgba(76, 175, 80, 0.1);
  border: 2rpx solid #4CAF50;
}

.type-selector-card:active {
  background-color: rgba(76, 175, 80, 0.15);
}

/* è®¢é˜…çŠ¶æ€å¡ç‰‡ */
.subscribe-card {
  background: #f9f9f9;
  border-radius: 12rpx;
  padding: 16rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.subscribe-icon {
  width: 56rpx;
  height: 56rpx;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28rpx;
  margin-right: 12rpx;
}

.subscribe-icon.granted {
  background-color: rgba(76, 175, 80, 0.2);
  color: #4CAF50;
}

.subscribe-icon.rejected {
  background-color: rgba(244, 67, 54, 0.2);
  color: #F44336;
}

.subscribe-icon.expired {
  background-color: rgba(255, 152, 0, 0.2);
  color: #FF9800;
}

.subscribe-icon.need-request {
  background-color: rgba(158, 158, 158, 0.2);
  color: #999;
}

.subscribe-info {
  flex: 1;
  display: flex;
  align-items: center;
}

.subscribe-status-text {
  font-size: 28rpx;
  color: #333;
  font-weight: 500;
}

.subscribe-expire-text {
  font-size: 24rpx;
  color: #999;
}

/* æŒ‰é’®ç»„ */
.button-group {
  display: flex;
  gap: 20rpx;
  margin-top: 30rpx;
}

.button-group .btn {
  flex: 1;
  text-align: center;
}
```

**æé†’å†å²é¡µé¢ï¼ˆpages/reminder-historyï¼‰**ï¼š

```css
/* ç»Ÿè®¡å¡ç‰‡ */
.history-stats-card {
  background-color: #ffffff;
  border-radius: 12rpx;
  padding: 30rpx;
  margin-bottom: 20rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
}

.stats-grid {
  display: flex;
  justify-content: space-around;
}

.stat-item {
  text-align: center;
  padding: 18rpx;
  border-radius: 16rpx;
  transition: background-color 0.3s ease;
}

.stat-item:active {
  background-color: rgba(76, 175, 80, 0.1);
}

.stat-value {
  font-size: 64rpx;
  font-weight: 600;
  margin-bottom: 8rpx;
}

.stat-value.success {
  color: #4CAF50;
}

.stat-value.failed {
  color: #F44336;
}

.stat-value.pending {
  color: #FF9800;
}

.stat-label {
  font-size: 28rpx;
  color: #666;
}

/* ç­›é€‰å¡ç‰‡ */
.filter-card {
  background-color: #ffffff;
  border-radius: 12rpx;
  padding: 30rpx;
  margin-bottom: 20rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
}

.filter-title {
  font-size: 32rpx;
  font-weight: 600;
  color: #333;
  margin-bottom: 24rpx;
}

.filter-group {
  display: flex;
  flex-wrap: wrap;
  gap: 12rpx;
}

.filter-chip {
  padding: 12rpx 24rpx;
  border-radius: 20rpx;
  font-size: 26rpx;
  background-color: #f5f5f5;
  color: #666;
  transition: all 0.2s ease;
}

.filter-chip.active {
  background-color: #4CAF50;
  color: #ffffff;
}

.filter-chip:active {
  transform: scale(0.95);
}

/* å†å²è®°å½•å¡ç‰‡ */
.history-card {
  background: #f9f9f9;
  border-radius: 12rpx;
  padding: 16rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);
  margin-bottom: 20rpx;
}

.history-card-header {
  display: flex;
  align-items: center;
  margin-bottom: 12rpx;
}

.history-icon {
  width: 56rpx;
  height: 56rpx;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28rpx;
  margin-right: 12rpx;
}

.history-icon.success {
  background-color: rgba(76, 175, 80, 0.2);
  color: #4CAF50;
}

.history-icon.failed {
  background-color: rgba(244, 67, 54, 0.2);
  color: #F44336;
}

.history-icon.pending {
  background-color: rgba(255, 152, 0, 0.2);
  color: #FF9800;
}

.history-info {
  flex: 1;
  display: flex;
  align-items: center;
}

.history-plant-name {
  font-size: 28rpx;
  color: #333;
  font-weight: 500;
}

.history-type {
  font-size: 24rpx;
  color: #999;
}

.history-status {
  display: flex;
  align-items: center;
}

.history-status-text {
  font-size: 24rpx;
  font-weight: 500;
}

.history-status-text.success {
  color: #4CAF50;
}

.history-status-text.failed {
  color: #F44336;
}

.history-status-text.pending {
  color: #FF9800;
}

.history-details {
  padding: 12rpx 0;
  border-top: 1rpx solid #e0e0e0;
}

.history-time {
  font-size: 24rpx;
  color: #666;
  margin-bottom: 8rpx;
}

.history-error {
  font-size: 24rpx;
  color: #F44336;
}

/* æ“ä½œæŒ‰é’® */
.action-buttons {
  display: flex;
  justify-content: flex-end;
  gap: 12rpx;
  margin-top: 12rpx;
}

.action-btn {
  padding: 8rpx 20rpx;
  border-radius: 20rpx;
  font-size: 24rpx;
  background-color: #f5f5f5;
  color: #666;
  transition: all 0.2s ease;
}

.action-btn:active {
  background-color: #e0e0e0;
}

.action-btn.delete {
  background-color: #ffebee;
  color: #F44336;
}

.action-btn.delete:active {
  background-color: #ffcdd2;
}
```

#### 3.0.3 å“åº”å¼è®¾è®¡è§„èŒƒ

```css
/* å°å±å¹•é€‚é… */
@media (max-width: 375px) {
  .card {
    padding: 24rpx;
  }
  
  .card-title {
    font-size: 28rpx;
  }
  
  .stat-value {
    font-size: 56rpx;
  }
}

/* å¤§å±å¹•é€‚é… */
@media (min-width: 768px) {
  .card {
    padding: 36rpx;
  }
  
  .card-title {
    font-size: 36rpx;
  }
  
  .stat-value {
    font-size: 72rpx;
  }
}
```

#### 3.0.4 åŠ¨ç”»æ•ˆæœè§„èŒƒ

```css
/* é¡µé¢åˆ‡æ¢åŠ¨ç”» */
.page-enter {
  animation: pageEnter 0.3s ease-out;
}

.page-leave {
  animation: pageLeave 0.3s ease-in;
}

@keyframes pageEnter {
  from {
    opacity: 0;
    transform: translateY(20rpx);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pageLeave {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-20rpx);
  }
}

/* å¡ç‰‡è¿›å…¥åŠ¨ç”» */
.card-enter {
  animation: cardEnter 0.4s ease-out;
}

@keyframes cardEnter {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* åˆ—è¡¨é¡¹è¿›å…¥åŠ¨ç”» */
.list-item-enter {
  animation: listItemEnter 0.3s ease-out;
}

@keyframes listItemEnter {
  from {
    opacity: 0;
    transform: translateX(-20rpx);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}
```

#### 3.0.5 æ— éšœç¢è®¾è®¡è§„èŒƒ

```css
/* ç„¦ç‚¹çŠ¶æ€ */
.focusable:focus {
  outline: 2rpx solid #4CAF50;
  outline-offset: 2rpx;
}

/* é«˜å¯¹æ¯”åº¦æ¨¡å¼ */
@media (prefers-contrast: high) {
  .card {
    border: 2rpx solid #333;
  }
  
  .text-primary {
    color: #000;
  }
}

/* å‡å°‘åŠ¨ç”» */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

#### 3.0.6 æ ·å¼è®¾è®¡æ€»ç»“

**è®¾è®¡åŸåˆ™**ï¼š

1. **ä¸€è‡´æ€§åŸåˆ™**ï¼šæ‰€æœ‰æé†’åŠŸèƒ½é¡µé¢ç»Ÿä¸€é‡‡ç”¨å¡ç‰‡å¼å¸ƒå±€ï¼Œç¡®ä¿è§†è§‰é£æ ¼ä¸æ•°æ®ç»Ÿè®¡é¡µé¢ä¿æŒä¸€è‡´
2. **å±‚æ¬¡æ€§åŸåˆ™**ï¼šé€šè¿‡é¢œè‰²ã€å­—ä½“å¤§å°ã€é—´è·ç­‰å…ƒç´ å»ºç«‹æ¸…æ™°çš„ä¿¡æ¯å±‚æ¬¡
3. **å¯è¯»æ€§åŸåˆ™**ï¼šç¡®ä¿æ–‡å­—å¯¹æ¯”åº¦å……è¶³ï¼Œå­—ä½“å¤§å°é€‚ä¸­ï¼Œä¾¿äºç”¨æˆ·é˜…è¯»
4. **äº¤äº’æ€§åŸåˆ™**ï¼šæä¾›æ˜ç¡®çš„è§†è§‰åé¦ˆï¼ŒåŒ…æ‹¬ç‚¹å‡»æ•ˆæœã€çŠ¶æ€å˜åŒ–ç­‰
5. **å“åº”æ€§åŸåˆ™**ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸ï¼Œç¡®ä¿åœ¨å„ç§è®¾å¤‡ä¸Šéƒ½æœ‰è‰¯å¥½çš„æ˜¾ç¤ºæ•ˆæœ

**å¡ç‰‡æ ·å¼åº”ç”¨åœºæ™¯**ï¼š

| é¡µé¢ | å¡ç‰‡ç±»å‹ | ç”¨é€” |
|------|----------|------|
| æé†’åˆ—è¡¨é¡µé¢ | ç»Ÿè®¡å¡ç‰‡ | æ˜¾ç¤ºæé†’æ€»æ•°å’Œæ´»è·ƒæ•°ç»Ÿè®¡ |
| æé†’åˆ—è¡¨é¡µé¢ | æé†’å¡ç‰‡ | å±•ç¤ºå•ä¸ªæé†’çš„è¯¦ç»†ä¿¡æ¯ |
| æé†’æ·»åŠ /ç¼–è¾‘é¡µé¢ | è¡¨å•å¡ç‰‡ | åŒ…å«è¡¨å•è¾“å…¥å’Œé€‰æ‹©å™¨ |
| æé†’æ·»åŠ /ç¼–è¾‘é¡µé¢ | é€‰æ‹©å™¨å¡ç‰‡ | æ¤ç‰©é€‰æ‹©ã€ç±»å‹é€‰æ‹©ç­‰ |
| æé†’æ·»åŠ /ç¼–è¾‘é¡µé¢ | è®¢é˜…çŠ¶æ€å¡ç‰‡ | æ˜¾ç¤ºè®¢é˜…æ¶ˆæ¯çŠ¶æ€ |
| æé†’å†å²é¡µé¢ | ç»Ÿè®¡å¡ç‰‡ | æ˜¾ç¤ºå†å²è®°å½•ç»Ÿè®¡ä¿¡æ¯ |
| æé†’å†å²é¡µé¢ | ç­›é€‰å¡ç‰‡ | æä¾›ç­›é€‰åŠŸèƒ½ |
| æé†’å†å²é¡µé¢ | å†å²è®°å½•å¡ç‰‡ | å±•ç¤ºå•æ¡å†å²è®°å½• |

**æ ·å¼å¤ç”¨ç­–ç•¥**ï¼š

1. **åŸºç¡€æ ·å¼ç±»**ï¼šå®šä¹‰é€šç”¨çš„å¡ç‰‡ã€æŒ‰é’®ã€è¾“å…¥æ¡†ç­‰åŸºç¡€æ ·å¼ç±»
2. **ä¸»é¢˜å˜é‡**ï¼šä½¿ç”¨CSSå˜é‡å®šä¹‰é¢œè‰²ã€å­—ä½“ã€é—´è·ç­‰ä¸»é¢˜å‚æ•°
3. **ç»„ä»¶æ ·å¼**ï¼šä¸ºå¯å¤ç”¨ç»„ä»¶ï¼ˆå¦‚é€‰æ‹©å™¨ã€ç­›é€‰å™¨ï¼‰å®šä¹‰ç‹¬ç«‹æ ·å¼
4. **çŠ¶æ€æ ·å¼**ï¼šä¸ºä¸åŒçŠ¶æ€ï¼ˆæˆåŠŸã€å¤±è´¥ã€å¾…å¤„ç†ï¼‰å®šä¹‰å¯¹åº”çš„æ ·å¼ç±»

**æ ·å¼æ–‡ä»¶ç»„ç»‡**ï¼š

```
styles/
â”œâ”€â”€ base.wxss           # åŸºç¡€æ ·å¼ï¼ˆé‡ç½®ã€å˜é‡ã€é€šç”¨ç±»ï¼‰
â”œâ”€â”€ card.wxss           # å¡ç‰‡æ ·å¼ï¼ˆæ‰€æœ‰å¡ç‰‡ç±»å‹çš„æ ·å¼ï¼‰
â”œâ”€â”€ button.wxss         # æŒ‰é’®æ ·å¼ï¼ˆå„ç§æŒ‰é’®ç±»å‹ï¼‰
â”œâ”€â”€ form.wxss           # è¡¨å•æ ·å¼ï¼ˆè¾“å…¥æ¡†ã€é€‰æ‹©å™¨ç­‰ï¼‰
â”œâ”€â”€ status.wxss         # çŠ¶æ€æ ·å¼ï¼ˆæˆåŠŸã€å¤±è´¥ã€è­¦å‘Šç­‰ï¼‰
â””â”€â”€ animation.wxss      # åŠ¨ç”»æ ·å¼ï¼ˆé¡µé¢åˆ‡æ¢ã€å¡ç‰‡è¿›å…¥ç­‰ï¼‰
```

**æ ·å¼å®ç°è¦ç‚¹**ï¼š

1. **å¡ç‰‡å®¹å™¨**ï¼šç»Ÿä¸€ä½¿ç”¨ `background-color: #ffffff; border-radius: 12rpx; padding: 30rpx; margin-bottom: 20rpx; box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);`
2. **å­å¡ç‰‡**ï¼šä½¿ç”¨ `background: #f9f9f9; border-radius: 12rpx; padding: 16rpx; box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.08);`
3. **å›¾æ ‡å®¹å™¨**ï¼šç»Ÿä¸€ä½¿ç”¨ `width: 56rpx; height: 56rpx; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28rpx; margin-right: 12rpx;`
4. **è¿›åº¦æ¡**ï¼šä½¿ç”¨ `flex: 1; height: 12rpx; background: #e0e0e0; border-radius: 6rpx; overflow: hidden;`
5. **ä¸»è‰²è°ƒ**ï¼šç»Ÿä¸€ä½¿ç”¨ç»¿è‰²ç³» `#4CAF50` ä½œä¸ºä¸»è‰²è°ƒ
6. **çŠ¶æ€é¢œè‰²**ï¼šæˆåŠŸ `#4CAF50`ã€å¤±è´¥ `#F44336`ã€è­¦å‘Š `#FF9800`ã€ä¿¡æ¯ `#2196F3`

**æ ·å¼æµ‹è¯•æ£€æŸ¥æ¸…å•**ï¼š

- [ ] æ‰€æœ‰å¡ç‰‡æ ·å¼ä¸æ•°æ®ç»Ÿè®¡é¡µé¢ä¿æŒä¸€è‡´
- [ ] é¢œè‰²å¯¹æ¯”åº¦ç¬¦åˆæ— éšœç¢æ ‡å‡†
- [ ] åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹æ˜¾ç¤ºæ­£å¸¸
- [ ] ç‚¹å‡»æ•ˆæœå’ŒçŠ¶æ€å˜åŒ–æ¸…æ™°å¯è§
- [ ] åŠ¨ç”»æ•ˆæœæµç•…è‡ªç„¶
- [ ] æ–‡å­—å¤§å°å’Œé—´è·åˆç†
- [ ] å›¾æ ‡å’Œæ–‡å­—å¯¹é½æ­£ç¡®
- [ ] è¡¨å•å…ƒç´ æ ·å¼ç»Ÿä¸€
- [ ] çŠ¶æ€æ ‡è¯†æ¸…æ™°æ˜ç¡®
- [ ] å“åº”å¼å¸ƒå±€æ­£å¸¸å·¥ä½œ

### 3.1 æé†’æ·»åŠ /ç¼–è¾‘é¡µé¢ï¼ˆpages/reminder-addï¼‰

#### 3.1.1 åŠŸèƒ½ç‰¹æ€§
- æ¤ç‰©é€‰æ‹©å™¨ï¼ˆä¸‹æ‹‰é€‰æ‹©ï¼‰
- æé†’ç±»å‹é€‰æ‹©ï¼ˆæµ‡æ°´/æ–½è‚¥/è‡ªå®šä¹‰ï¼‰
- è‡ªå®šä¹‰ç±»å‹è¾“å…¥ï¼ˆå½“é€‰æ‹©è‡ªå®šä¹‰æ—¶æ˜¾ç¤ºï¼‰
- æ—¶é—´é€‰æ‹©å™¨ï¼ˆé€‰æ‹©å…·ä½“æ—¶é—´ï¼‰
- é¢‘ç‡é€‰æ‹©å™¨ï¼ˆæ¯å¤©/æ¯å‘¨/æ¯æœˆ/è‡ªå®šä¹‰å¤©æ•°ï¼‰
- è®¢é˜…æ¶ˆæ¯ç”³è¯·æŒ‰é’®
- è®¢é˜…çŠ¶æ€æ˜¾ç¤º
- ä¿å­˜/å–æ¶ˆæ“ä½œ

#### 3.1.2 é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é€‰æ‹©æ¤ç‰©               â”‚
â”‚   [ä¸‹æ‹‰é€‰æ‹©å™¨]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æé†’ç±»å‹               â”‚
â”‚   [æµ‡æ°´] [æ–½è‚¥] [è‡ªå®šä¹‰]  â”‚
â”‚   [è‡ªå®šä¹‰ç±»å‹è¾“å…¥æ¡†]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æé†’æ—¶é—´               â”‚
â”‚   [æ—¶é—´é€‰æ‹©å™¨]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æé†’é¢‘ç‡               â”‚
â”‚   [æ¯å¤©] [æ¯å‘¨] [æ¯æœˆ]   â”‚
â”‚   [è‡ªå®šä¹‰å¤©æ•°]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   è®¢é˜…æ¶ˆæ¯               â”‚
â”‚   [ç”³è¯·è®¢é˜…æ¶ˆæ¯]         â”‚
â”‚   âœ“ å·²è®¢é˜… (æœ‰æ•ˆæœŸ30å¤©)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   [å–æ¶ˆ]      [ä¿å­˜]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.3 é¡µé¢æ–‡ä»¶ç»“æ„
```
pages/reminder-add/
â”œâ”€â”€ reminder-add.js       # é¡µé¢é€»è¾‘
â”œâ”€â”€ reminder-add.json     # é¡µé¢é…ç½®
â”œâ”€â”€ reminder-add.wxml     # é¡µé¢ç»“æ„
â””â”€â”€ reminder-add.wxss     # é¡µé¢æ ·å¼
```

### 3.2 æé†’å†å²é¡µé¢ï¼ˆpages/reminder-historyï¼‰

#### 3.2.1 åŠŸèƒ½ç‰¹æ€§
- æŒ‰æ—¶é—´å€’åºå±•ç¤ºæé†’å†å²
- æ˜¾ç¤ºæé†’ç±»å‹ã€æ¤ç‰©åç§°ã€å‘é€çŠ¶æ€
- æ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰ï¼ˆå…¨éƒ¨/æˆåŠŸ/å¤±è´¥/å¾…å‘é€ï¼‰
- æ”¯æŒæŒ‰æ—¶é—´èŒƒå›´ç­›é€‰
- æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯ï¼ˆæˆåŠŸæ¬¡æ•°ã€å¤±è´¥æ¬¡æ•°ã€å¾…å‘é€æ¬¡æ•°ï¼‰
- æ”¯æŒåˆ é™¤å†å²è®°å½•
- æ”¯æŒæ¸…ç©ºå†å²è®°å½•

#### 3.2.2 é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æé†’å†å²               â”‚
â”‚   æˆåŠŸ: 10  å¤±è´¥: 2      â”‚
â”‚   å¾…å‘é€: 3              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   [å…¨éƒ¨] [æˆåŠŸ] [å¤±è´¥]   â”‚
â”‚   [å¾…å‘é€]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ğŸ“… 2026-01-29 08:00   â”‚
â”‚   æµ‡æ°´ - ç»¿è            â”‚
â”‚   âœ“ å‘é€æˆåŠŸ             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ğŸ“… 2026-01-28 08:00   â”‚
â”‚   æ–½è‚¥ - ç»¿è            â”‚
â”‚   âœ— å‘é€å¤±è´¥             â”‚
â”‚   é”™è¯¯: æ¨¡æ¿IDæ— æ•ˆ       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ğŸ“… 2026-01-27 08:00   â”‚
â”‚   æ¢ç›† - å¤šè‚‰æ¤ç‰©        â”‚
â”‚   â³ å¾…å‘é€              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.3 é¡µé¢æ–‡ä»¶ç»“æ„
```
pages/reminder-history/
â”œâ”€â”€ reminder-history.js    # é¡µé¢é€»è¾‘
â”œâ”€â”€ reminder-history.json  # é¡µé¢é…ç½®
â”œâ”€â”€ reminder-history.wxml  # é¡µé¢ç»“æ„
â””â”€â”€ reminder-history.wxss  # é¡µé¢æ ·å¼
```

### 3.3 æé†’åˆ—è¡¨é¡µé¢æ›´æ–°ï¼ˆpages/remindersï¼‰

#### 3.3.1 æ–°å¢åŠŸèƒ½
- é›†æˆæé†’æ·»åŠ é¡µé¢å…¥å£
- é›†æˆæé†’ç¼–è¾‘é¡µé¢å…¥å£
- é›†æˆæé†’å†å²é¡µé¢å…¥å£
- æ˜¾ç¤ºè®¢é˜…çŠ¶æ€
- æ˜¾ç¤ºä¸‹æ¬¡æé†’æ—¶é—´å€’è®¡æ—¶
- æ”¯æŒæ‰¹é‡æ“ä½œï¼ˆæ‰¹é‡å¼€å¯/å…³é—­æé†’ï¼‰

#### 3.3.2 é¡µé¢å¸ƒå±€æ›´æ–°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å…¨éƒ¨: 5  æ´»è·ƒ: 3       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   [æé†’å†å²] [æ‰¹é‡æ“ä½œ]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ğŸ’§ æµ‡æ°´ - ç»¿è         â”‚
â”‚   â° 2å°æ—¶å             â”‚
â”‚   ğŸ“… æ¯å¤© 08:00          â”‚
â”‚   âœ“ å·²è®¢é˜…               â”‚
â”‚   [ç¼–è¾‘] [åˆ é™¤]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ğŸŒ± æ–½è‚¥ - ç»¿è         â”‚
â”‚   â° 5å¤©å               â”‚
â”‚   ğŸ“… æ¯å‘¨ 08:00          â”‚
â”‚   âœ“ å·²è®¢é˜…               â”‚
â”‚   [ç¼–è¾‘] [åˆ é™¤]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å®ç°

### 4.1 è®¢é˜…æ¶ˆæ¯ç”³è¯·æµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant P as å°ç¨‹åº
    participant W as å¾®ä¿¡æœåŠ¡å™¨
    
    U->>P: ç‚¹å‡»"æ·»åŠ æé†’"
    P->>P: æ£€æŸ¥è®¢é˜…çŠ¶æ€
    alt æœªè®¢é˜…æˆ–è®¢é˜…å·²è¿‡æœŸ
        P->>W: requestSubscribeMessage()
        W->>U: æ˜¾ç¤ºè®¢é˜…ç¡®è®¤å¼¹çª—
        U->>W: ç¡®è®¤è®¢é˜…
        W->>P: è¿”å›è®¢é˜…ç»“æœ
        P->>P: ä¿å­˜è®¢é˜…çŠ¶æ€å’Œè¿‡æœŸæ—¶é—´
    else è®¢é˜…æœ‰æ•ˆ
        P->>P: ç›´æ¥ä½¿ç”¨ç°æœ‰è®¢é˜…
    end
    P->>P: ä¿å­˜æé†’é…ç½®
    P->>P: è®¡ç®—ä¸‹æ¬¡æé†’æ—¶é—´
```

### 4.2 è®¢é˜…æ¶ˆæ¯å‘é€æµç¨‹

```mermaid
sequenceDiagram
    participant T as äº‘å‡½æ•°å®šæ—¶ä»»åŠ¡
    participant D as äº‘æ•°æ®åº“
    participant P as å°ç¨‹åº
    participant W as å¾®ä¿¡æœåŠ¡å™¨
    participant U as ç”¨æˆ·
    
    T->>D: æŸ¥è¯¢å¾…å‘é€æé†’
    D->>T: è¿”å›æé†’åˆ—è¡¨
    T->>T: æ£€æŸ¥è®¢é˜…çŠ¶æ€
    alt è®¢é˜…æœ‰æ•ˆ
        T->>W: å‘é€è®¢é˜…æ¶ˆæ¯
        W->>U: æ¨é€æ¶ˆæ¯
        W->>T: è¿”å›å‘é€ç»“æœ
        T->>D: è®°å½•å‘é€å†å²
        T->>D: æ›´æ–°ä¸‹æ¬¡æé†’æ—¶é—´
    else è®¢é˜…æ— æ•ˆ
        T->>D: è®°å½•å¤±è´¥å†å²
        T->>D: æ ‡è®°éœ€è¦é‡æ–°è®¢é˜…
    end
```

### 4.3 æé†’æ—¶é—´è®¡ç®—é€»è¾‘

```javascript
/**
 * è®¡ç®—ä¸‹æ¬¡æé†’æ—¶é—´
 * @param {string} currentTime - å½“å‰æ—¶é—´
 * @param {string} time - æé†’æ—¶é—´ï¼ˆHH:mmï¼‰
 * @param {number} frequency - é¢‘ç‡ï¼ˆå¤©æ•°ï¼‰
 * @param {string} frequencyType - é¢‘ç‡ç±»å‹
 * @returns {string} ä¸‹æ¬¡æé†’æ—¶é—´ï¼ˆISOæ ¼å¼ï¼‰
 */
function calculateNextRemindTime(currentTime, time, frequency, frequencyType) {
  const now = new Date(currentTime)
  const [hours, minutes] = time.split(':').map(Number)
  
  let nextTime = new Date(now)
  nextTime.setHours(hours, minutes, 0, 0)
  
  // å¦‚æœä»Šå¤©çš„æé†’æ—¶é—´å·²è¿‡ï¼Œåˆ™ä»æ˜å¤©å¼€å§‹è®¡ç®—
  if (nextTime <= now) {
    nextTime.setDate(nextTime.getDate() + 1)
  }
  
  // æ ¹æ®é¢‘ç‡ç±»å‹è®¡ç®—
  switch (frequencyType) {
    case 'daily':
      // æ¯å¤©æé†’ï¼Œæ— éœ€é¢å¤–è®¡ç®—
      break
    case 'weekly':
      nextTime.setDate(nextTime.getDate() + (frequency - 1) * 7)
      break
    case 'monthly':
      nextTime.setMonth(nextTime.getMonth() + frequency)
      break
    case 'custom':
      nextTime.setDate(nextTime.getDate() + frequency)
      break
  }
  
  return nextTime.toISOString()
}
```

### 4.4 è®¢é˜…æ¶ˆæ¯æ¨¡æ¿é…ç½®

**æ¨¡æ¿ID**: `U3WXNNIv14paU3pZJggJ2ftVZglojkvKr9WFecqQOxo`

**æ¨¡æ¿å†…å®¹ç¤ºä¾‹**:
```
{{thing1.DATA}}
{{time2.DATA}}
{{thing3.DATA}}
```

**å‚æ•°è¯´æ˜**:
- `thing1`: æ¤ç‰©åç§°
- `time2`: æé†’æ—¶é—´
- `thing3`: æé†’ç±»å‹

---

## â˜ï¸ äº‘å‡½æ•°è®¾è®¡

### 5.1 äº‘å‡½æ•°ç»“æ„

```
cloudfunctions/
â”œâ”€â”€ send-reminder/          # å‘é€æé†’æ¶ˆæ¯
â”‚   â”œâ”€â”€ index.js
â”‚   â””â”€â”€ package.json
â””â”€â”€ check-reminders/        # æ£€æŸ¥å¾…å‘é€æé†’
    â”œâ”€â”€ index.js
    â””â”€â”€ package.json
```

### 5.2 å‘é€æé†’äº‘å‡½æ•°ï¼ˆsend-reminderï¼‰

```javascript
// cloudfunctions/send-reminder/index.js
const cloud = require('wx-server-sdk')
cloud.init({
  env: cloud.DYNAMIC_CURRENT_ENV
})

const db = cloud.database()

exports.main = async (event, context) => {
  const { reminderId } = event
  
  try {
    // è·å–æé†’ä¿¡æ¯
    const reminderRes = await db.collection('reminders').doc(reminderId).get()
    const reminder = reminderRes.data
    
    // è·å–æ¤ç‰©ä¿¡æ¯
    const plantRes = await db.collection('plants').doc(reminder.plantId).get()
    const plant = plantRes.data
    
    // æ£€æŸ¥è®¢é˜…çŠ¶æ€
    if (reminder.subscribeStatus !== 'granted') {
      return {
        success: false,
        message: 'è®¢é˜…çŠ¶æ€æ— æ•ˆ'
      }
    }
    
    // å‘é€è®¢é˜…æ¶ˆæ¯
    const sendResult = await cloud.openapi.subscribeMessage.send({
      touser: reminder.openid,
      templateId: reminder.templateId,
      page: `pages/plant-detail/plant-detail?id=${reminder.plantId}`,
      data: {
        thing1: {
          value: plant.name
        },
        time2: {
          value: reminder.time
        },
        thing3: {
          value: reminder.type === 'custom' ? reminder.customType : 
                 reminder.type === 'watering' ? 'æµ‡æ°´' : 'æ–½è‚¥'
        }
      }
    })
    
    // è®°å½•å‘é€å†å²
    await db.collection('reminder_history').add({
      data: {
        reminderId: reminder._id,
        plantId: reminder.plantId,
        plantName: plant.name,
        type: reminder.type,
        customType: reminder.customType,
        remindTime: reminder.nextRemindTime,
        sendStatus: 'success',
        sendTime: new Date().toISOString(),
        createTime: new Date().toISOString()
      }
    })
    
    // è®¡ç®—ä¸‹æ¬¡æé†’æ—¶é—´
    const nextRemindTime = calculateNextRemindTime(
      new Date().toISOString(),
      reminder.time,
      reminder.frequency,
      reminder.frequencyType
    )
    
    // æ›´æ–°æé†’çš„ä¸‹æ¬¡æé†’æ—¶é—´
    await db.collection('reminders').doc(reminderId).update({
      data: {
        nextRemindTime: nextRemindTime
      }
    })
    
    return {
      success: true,
      message: 'æé†’å‘é€æˆåŠŸ'
    }
    
  } catch (error) {
    // è®°å½•å¤±è´¥å†å²
    await db.collection('reminder_history').add({
      data: {
        reminderId: reminderId,
        sendStatus: 'failed',
        errorMessage: error.message,
        createTime: new Date().toISOString()
      }
    })
    
    return {
      success: false,
      message: error.message
    }
  }
}
```

### 5.3 æ£€æŸ¥æé†’äº‘å‡½æ•°ï¼ˆcheck-remindersï¼‰

```javascript
// cloudfunctions/check-reminders/index.js
const cloud = require('wx-server-sdk')
cloud.init({
  env: cloud.DYNAMIC_CURRENT_ENV
})

const db = cloud.database()

exports.main = async (event, context) => {
  try {
    const now = new Date()
    
    // æŸ¥è¯¢æ‰€æœ‰å¾…å‘é€çš„æé†’
    const remindersRes = await db.collection('reminders')
      .where({
        isEnabled: true,
        nextRemindTime: db.command.lte(now.toISOString())
      })
      .get()
    
    const reminders = remindersRes.data
    
    // éå†å¹¶å‘é€æé†’
    const results = await Promise.all(
      reminders.map(async (reminder) => {
        try {
          // è°ƒç”¨å‘é€æé†’äº‘å‡½æ•°
          const result = await cloud.callFunction({
            name: 'send-reminder',
            data: {
              reminderId: reminder._id
            }
          })
          
          return {
            reminderId: reminder._id,
            success: result.result.success,
            message: result.result.message
          }
        } catch (error) {
          return {
            reminderId: reminder._id,
            success: false,
            message: error.message
          }
        }
      })
    )
    
    return {
      success: true,
      total: reminders.length,
      results: results
    }
    
  } catch (error) {
    return {
      success: false,
      message: error.message
    }
  }
}
```

### 5.4 å®šæ—¶è§¦å‘å™¨é…ç½®

åœ¨ `cloudfunctions/check-reminders/config.json` ä¸­é…ç½®å®šæ—¶è§¦å‘å™¨ï¼š

```json
{
  "triggers": [
    {
      "name": "checkRemindersTimer",
      "type": "timer",
      "config": "0 * * * * * *"
    }
  ]
}
```

è¯´æ˜ï¼š`0 * * * * * *` è¡¨ç¤ºæ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´ã€‚

---

## ğŸ› ï¸ å·¥å…·å‡½æ•°è®¾è®¡

### 6.1 è®¢é˜…æ¶ˆæ¯å·¥å…·å‡½æ•°ï¼ˆutils/subscription.jsï¼‰

```javascript
// utils/subscription.js
const storage = require('./storage.js')

class SubscriptionService {
  /**
   * ç”³è¯·è®¢é˜…æ¶ˆæ¯
   * @param {string} templateId - æ¨¡æ¿ID
   * @returns {Promise<Object>} è®¢é˜…ç»“æœ
   */
  async requestSubscribe(templateId) {
    return new Promise((resolve, reject) => {
      wx.requestSubscribeMessage({
        tmplIds: [templateId],
        success: (res) => {
          if (res[templateId] === 'accept') {
            // ç”¨æˆ·åŒæ„è®¢é˜…
            const subscribeData = {
              status: 'granted',
              time: new Date().toISOString(),
              expireTime: this.calculateExpireTime()
            }
            this.saveSubscribeData(subscribeData)
            resolve({
              success: true,
              status: 'granted',
              message: 'è®¢é˜…æˆåŠŸ'
            })
          } else if (res[templateId] === 'reject') {
            // ç”¨æˆ·æ‹’ç»è®¢é˜…
            const subscribeData = {
              status: 'rejected',
              time: new Date().toISOString()
            }
            this.saveSubscribeData(subscribeData)
            resolve({
              success: false,
              status: 'rejected',
              message: 'ç”¨æˆ·æ‹’ç»è®¢é˜…'
            })
          } else {
            // å…¶ä»–æƒ…å†µ
            resolve({
              success: false,
              status: 'unknown',
              message: 'è®¢é˜…çŠ¶æ€æœªçŸ¥'
            })
          }
        },
        fail: (error) => {
          reject({
            success: false,
            message: error.errMsg || 'è®¢é˜…å¤±è´¥'
          })
        }
      })
    })
  }
  
  /**
   * è®¡ç®—è®¢é˜…è¿‡æœŸæ—¶é—´ï¼ˆ30å¤©åï¼‰
   * @returns {string} è¿‡æœŸæ—¶é—´ï¼ˆISOæ ¼å¼ï¼‰
   */
  calculateExpireTime() {
    const expireTime = new Date()
    expireTime.setDate(expireTime.getDate() + 30)
    return expireTime.toISOString()
  }
  
  /**
   * ä¿å­˜è®¢é˜…æ•°æ®
   * @param {Object} subscribeData - è®¢é˜…æ•°æ®
   */
  saveSubscribeData(subscribeData) {
    const userInfo = storage.getUserInfo()
    userInfo.subscribeData = subscribeData
    storage.setUserInfo(userInfo)
  }
  
  /**
   * è·å–è®¢é˜…æ•°æ®
   * @returns {Object} è®¢é˜…æ•°æ®
   */
  getSubscribeData() {
    const userInfo = storage.getUserInfo()
    return userInfo.subscribeData || {
      status: 'need-request',
      time: null,
      expireTime: null
    }
  }
  
  /**
   * æ£€æŸ¥è®¢é˜…æ˜¯å¦æœ‰æ•ˆ
   * @returns {boolean} æ˜¯å¦æœ‰æ•ˆ
   */
  isSubscribeValid() {
    const subscribeData = this.getSubscribeData()
    
    if (subscribeData.status !== 'granted') {
      return false
    }
    
    if (!subscribeData.expireTime) {
      return false
    }
    
    const now = new Date()
    const expireTime = new Date(subscribeData.expireTime)
    
    return now < expireTime
  }
  
  /**
   * è·å–è®¢é˜…çŠ¶æ€æ–‡æœ¬
   * @returns {string} çŠ¶æ€æ–‡æœ¬
   */
  getSubscribeStatusText() {
    const subscribeData = this.getSubscribeData()
    
    switch (subscribeData.status) {
      case 'granted':
        if (this.isSubscribeValid()) {
          const expireTime = new Date(subscribeData.expireTime)
          const daysLeft = Math.ceil((expireTime - new Date()) / (1000 * 60 * 60 * 24))
          return `å·²è®¢é˜…ï¼ˆå‰©ä½™${daysLeft}å¤©ï¼‰`
        } else {
          return 'è®¢é˜…å·²è¿‡æœŸ'
        }
      case 'rejected':
        return 'å·²æ‹’ç»è®¢é˜…'
      case 'need-request':
        return 'æœªè®¢é˜…'
      default:
        return 'çŠ¶æ€æœªçŸ¥'
    }
  }
}

// å¯¼å‡ºå•ä¾‹
const subscriptionService = new SubscriptionService()
module.exports = subscriptionService
```

### 6.2 æ‰©å±•å­˜å‚¨å·¥å…·å‡½æ•°ï¼ˆutils/storage.jsï¼‰

```javascript
// åœ¨ StorageService ç±»ä¸­æ·»åŠ ä»¥ä¸‹æ–¹æ³•

/**
 * è·å–æé†’å†å²åˆ—è¡¨
 * @returns {array} æé†’å†å²åˆ—è¡¨
 */
getReminderHistory() {
  return this.get(STORAGE_KEYS.REMINDER_HISTORY, [])
}

/**
 * è®¾ç½®æé†’å†å²åˆ—è¡¨
 * @param {array} history æé†’å†å²åˆ—è¡¨
 * @returns {boolean} æ˜¯å¦æˆåŠŸ
 */
setReminderHistory(history) {
  return this.set(STORAGE_KEYS.REMINDER_HISTORY, history)
}

/**
 * æ·»åŠ æé†’å†å²è®°å½•
 * @param {object} historyItem å†å²è®°å½•é¡¹
 * @returns {boolean} æ˜¯å¦æˆåŠŸ
 */
addReminderHistory(historyItem) {
  const history = this.getReminderHistory()
  historyItem._id = this.generateId()
  historyItem.createTime = new Date().toISOString()
  history.unshift(historyItem) // æ·»åŠ åˆ°å¼€å¤´
  
  // é™åˆ¶å†å²è®°å½•æ•°é‡ï¼Œæœ€å¤šä¿ç•™1000æ¡
  if (history.length > 1000) {
    history.length = 1000
  }
  
  return this.setReminderHistory(history)
}

/**
 * åˆ é™¤æé†’å†å²è®°å½•
 * @param {string} historyId å†å²è®°å½•ID
 * @returns {boolean} æ˜¯å¦æˆåŠŸ
 */
deleteReminderHistory(historyId) {
  const history = this.getReminderHistory()
  const filteredHistory = history.filter(h => h._id !== historyId)
  if (filteredHistory.length !== history.length) {
    return this.setReminderHistory(filteredHistory)
  }
  return false
}

/**
 * æ¸…ç©ºæé†’å†å²è®°å½•
 * @returns {boolean} æ˜¯å¦æˆåŠŸ
 */
clearReminderHistory() {
  return this.setReminderHistory([])
}

/**
 * è·å–æé†’å†å²ç»Ÿè®¡
 * @returns {object} ç»Ÿè®¡ä¿¡æ¯
 */
getReminderHistoryStats() {
  const history = this.getReminderHistory()
  
  const stats = {
    total: history.length,
    success: 0,
    failed: 0,
    pending: 0
  }
  
  history.forEach(item => {
    switch (item.sendStatus) {
      case 'success':
        stats.success++
        break
      case 'failed':
        stats.failed++
        break
      case 'pending':
        stats.pending++
        break
    }
  })
  
  return stats
}

/**
 * ç­›é€‰æé†’å†å²è®°å½•
 * @param {object} filters ç­›é€‰æ¡ä»¶
 * @returns {array} ç­›é€‰åçš„å†å²è®°å½•
 */
filterReminderHistory(filters) {
  let history = this.getReminderHistory()
  
  // æŒ‰çŠ¶æ€ç­›é€‰
  if (filters.status && filters.status !== 'all') {
    history = history.filter(h => h.sendStatus === filters.status)
  }
  
  // æŒ‰æ—¶é—´èŒƒå›´ç­›é€‰
  if (filters.startTime) {
    history = history.filter(h => new Date(h.createTime) >= new Date(filters.startTime))
  }
  
  if (filters.endTime) {
    history = history.filter(h => new Date(h.createTime) <= new Date(filters.endTime))
  }
  
  // æŒ‰æ¤ç‰©ç­›é€‰
  if (filters.plantId) {
    history = history.filter(h => h.plantId === filters.plantId)
  }
  
  // æŒ‰æé†’ç±»å‹ç­›é€‰
  if (filters.type) {
    history = history.filter(h => h.type === filters.type)
  }
  
  return history
}
```

---

## ğŸ“Š å®æ–½è®¡åˆ’

### 7.1 å¼€å‘é˜¶æ®µåˆ’åˆ†

#### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¶æ„æ­å»ºï¼ˆé¢„è®¡2-3å¤©ï¼‰
- [ ] æ‰©å±•æ•°æ®ç»“æ„
- [ ] åˆ›å»ºè®¢é˜…æ¶ˆæ¯å·¥å…·å‡½æ•°
- [ ] æ‰©å±•å­˜å‚¨å·¥å…·å‡½æ•°
- [ ] é…ç½®äº‘å¼€å‘ç¯å¢ƒ

#### ç¬¬äºŒé˜¶æ®µï¼šé¡µé¢å¼€å‘ï¼ˆé¢„è®¡3-4å¤©ï¼‰
- [ ] åˆ›å»ºæé†’æ·»åŠ /ç¼–è¾‘é¡µé¢
- [ ] åˆ›å»ºæé†’å†å²é¡µé¢
- [ ] æ›´æ–°æé†’åˆ—è¡¨é¡µé¢
- [ ] é›†æˆè®¢é˜…æ¶ˆæ¯ç”³è¯·åŠŸèƒ½

#### ç¬¬ä¸‰é˜¶æ®µï¼šäº‘å‡½æ•°å¼€å‘ï¼ˆé¢„è®¡2-3å¤©ï¼‰
- [ ] å¼€å‘å‘é€æé†’äº‘å‡½æ•°
- [ ] å¼€å‘æ£€æŸ¥æé†’äº‘å‡½æ•°
- [ ] é…ç½®å®šæ—¶è§¦å‘å™¨
- [ ] æµ‹è¯•äº‘å‡½æ•°åŠŸèƒ½

#### ç¬¬å››é˜¶æ®µï¼šé›†æˆæµ‹è¯•ï¼ˆé¢„è®¡1-2å¤©ï¼‰
- [ ] åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•
- [ ] ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- [ ] æ€§èƒ½æµ‹è¯•
- [ ] å‘å¸ƒå‡†å¤‡

### 7.2 å…³é”®é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | å®Œæˆæ ‡å‡† | é¢„è®¡æ—¶é—´ |
|--------|----------|----------|
| æ•°æ®ç»“æ„å®Œæˆ | æ‰€æœ‰æ•°æ®æ¨¡å‹å’Œå·¥å…·å‡½æ•°å°±ç»ª | ç¬¬3å¤© |
| é¡µé¢å¼€å‘å®Œæˆ | æ‰€æœ‰é¡µé¢UIå’Œäº¤äº’åŠŸèƒ½å®Œæˆ | ç¬¬7å¤© |
| äº‘å‡½æ•°éƒ¨ç½²å®Œæˆ | äº‘å‡½æ•°æ­£å¸¸è¿è¡Œï¼Œå®šæ—¶è§¦å‘æ­£å¸¸ | ç¬¬10å¤© |
| é›†æˆæµ‹è¯•å®Œæˆ | æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼Œæ— é‡å¤§bug | ç¬¬12å¤© |

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 8.1 æŠ€æœ¯é™åˆ¶
- å¾®ä¿¡è®¢é˜…æ¶ˆæ¯æœ‰å‘é€é¢‘ç‡é™åˆ¶
- äº‘å‡½æ•°æœ‰æ‰§è¡Œæ—¶é•¿é™åˆ¶ï¼ˆæœ€é•¿60ç§’ï¼‰
- æœ¬åœ°å­˜å‚¨ç©ºé—´æœ‰é™ï¼ˆ10MBï¼‰
- å®šæ—¶è§¦å‘å™¨æœ€å°é—´éš”ä¸º1åˆ†é’Ÿ

### 8.2 ç”¨æˆ·ä½“éªŒè€ƒè™‘
- é¦–æ¬¡è®¢é˜…éœ€è¦ç”¨æˆ·æ‰‹åŠ¨æˆæƒ
- è®¢é˜…æ¶ˆæ¯æœ‰30å¤©æœ‰æ•ˆæœŸ
- æé†’æ—¶é—´éœ€è¦è€ƒè™‘ç”¨æˆ·æ—¶åŒº
- æä¾›æ¸…æ™°çš„é”™è¯¯æç¤ºå’Œé‡è¯•æœºåˆ¶

### 8.3 æ•°æ®å®‰å…¨
- æ•æ„Ÿä¿¡æ¯éœ€è¦åŠ å¯†å­˜å‚¨
- ç”¨æˆ·éšç§æ•°æ®ä¿æŠ¤
- é˜²æ­¢æ¶æ„è®¢é˜…è¯·æ±‚
- å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®

---

## ğŸ“ˆ åç»­ä¼˜åŒ–æ–¹å‘

### 9.1 åŠŸèƒ½å¢å¼º
- æ”¯æŒå¤šç§æé†’æ¨¡æ¿
- å¢åŠ æ™ºèƒ½æ¨èç®—æ³•
- æ”¯æŒè¯­éŸ³æé†’
- å¢åŠ ç¤¾åŒºåˆ†äº«åŠŸèƒ½

### 9.2 æ€§èƒ½ä¼˜åŒ–
- å®ç°æ•°æ®åˆ†é¡µåŠ è½½
- ä¼˜åŒ–äº‘å‡½æ•°æ‰§è¡Œæ•ˆç‡
- å¢åŠ ç¼“å­˜æœºåˆ¶
- å‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚

### 9.3 è¿è¥åˆ†æ
- å¢åŠ ç”¨æˆ·è¡Œä¸ºåˆ†æ
- æ”¶é›†ç”¨æˆ·åé¦ˆ
- ä¼˜åŒ–æé†’ç­–ç•¥
- æå‡ç”¨æˆ·ç•™å­˜ç‡

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¶é—´**: 2026å¹´1æœˆ29æ—¥  
**æœ€åæ›´æ–°**: 2026å¹´1æœˆ29æ—¥  
**è´Ÿè´£äºº**: CodeFree